(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-059f7c58"],{"0029":function(a,t,e){"use strict";var i=e("3f02"),o=e.n(i);o.a},"3f02":function(a,t,e){},7732:function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"goods"}},[i("div",{staticClass:"create_header"},[i("div",{staticClass:"back",on:{click:t.handleBack}},[i("i",{staticClass:"iconfont icon-huitui"}),i("p",{staticClass:"header_info"},[t._v("返回")])]),i("div",{staticClass:"header_title"},[t._v("收款单")])]),i("van-collapse",{staticStyle:{"margin-top":".45rem"},model:{value:t.activeNames,callback:function(a){t.activeNames=a},expression:"activeNames"}},[i("van-collapse-item",{attrs:{name:"1",title:"标题"},scopedSlots:t._u([{key:"title",fn:function(){return[i("van-form",{on:{submit:t.onSubmit}},[i("van-field",{attrs:{label:"名称",clearable:"",required:"",placeholder:"请输入名称","right-icon":"warning-o",rules:[{required:!0,message:"请填写名称"}]},on:{"click-right-icon":function(a){t.handleTips("名称(必填)")}},model:{value:t.formData.product_name,callback:function(a){t.$set(t.formData,"product_name",a)},expression:"formData.product_name"}})],1)]},proxy:!0}])},[i("van-field",{attrs:{rows:"2",clearable:"",autosize:"",label:"描述",type:"textarea",maxlength:"20",placeholder:"请输入描述"},model:{value:t.formData.introduction,callback:function(a){t.$set(t.formData,"introduction",a)},expression:"formData.introduction"}})],1),i("van-collapse-item",{attrs:{name:"2"},scopedSlots:t._u([{key:"title",fn:function(){return[i("van-cell-group",[i("van-form",{on:{submit:t.onSubmit}},[i("van-field",{attrs:{label:"单价(￥)",required:"",clearable:"",type:"number",placeholder:"请输入单价","right-icon":"warning-o",rules:[{required:!0,message:"请填写单价"}]},on:{"click-right-icon":function(a){t.handleTips("单价(必填)")},blur:t.change},model:{value:t.formData.price,callback:function(a){t.$set(t.formData,"price",a)},expression:"formData.price"}})],1)],1)]},proxy:!0}])},[i("van-checkbox",{staticStyle:{paddingLeft:".16rem"},attrs:{"checked-color":"#7BACDC","icon-size":"16"},model:{value:t.formData.num_flag,callback:function(a){t.$set(t.formData,"num_flag",a)},expression:"formData.num_flag"}},[t._v("可购买多个")])],1),i("van-cell",{staticStyle:{paddingLeft:".32rem"},attrs:{center:"",title:"更多选项"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[i("van-switch",{attrs:{size:"18"},model:{value:t.formData.checked,callback:function(a){t.$set(t.formData,"checked",a)},expression:"formData.checked"}})]},proxy:!0}])}),t.formData.checked?i("div",[i("van-radio-group",{staticStyle:{fontSize:".14rem",paddingLeft:".32rem"},attrs:{direction:"horizontal","checked-color":"#7BACDC"},on:{change:t.addressChange},model:{value:t.formData.address_flag,callback:function(a){t.$set(t.formData,"address_flag",a)},expression:"formData.address_flag"}},[i("van-radio",{attrs:{name:"0","icon-size":"16"}},[t._v("无需发货")]),i("van-radio",{attrs:{name:"1","icon-size":"16"}},[t._v("发货")])],1),"1"===t.formData.address_flag?i("van-collapse-item",{attrs:{name:"3"},scopedSlots:t._u([{key:"title",fn:function(){return[i("van-cell-group",[i("van-field",{attrs:{label:"固定运费(￥)",disabled:t.formData.checked1,clearable:"",type:"number",placeholder:"请输入运费"},model:{value:t.formData.fare,callback:function(a){t.$set(t.formData,"fare",a)},expression:"formData.fare"}})],1)]},proxy:!0}],null,!1,1955204766)},[i("van-checkbox",{staticStyle:{paddingLeft:".15rem"},attrs:{"checked-color":"#7BACDC","icon-size":"16"},on:{change:t.setFare},model:{value:t.formData.checked1,callback:function(a){t.$set(t.formData,"checked1",a)},expression:"formData.checked1"}},[t._v("运费自动计算")]),t.formData.checked1?i("van-cell-group",{staticStyle:{"margin-top":".2rem"}},[i("van-dropdown-menu",{attrs:{direction:"up","acitve-color":"#7BACDC"}},[i("van-dropdown-item",{ref:"item",attrs:{title:t.title}},[t._l(t.option2,(function(a){return i("van-cell",{key:a.type_id,attrs:{title:a.name},on:{click:function(e){return t.handleClick(a)}}})})),i("van-button",{attrs:{block:"",type:"info"},on:{click:t.onConfirm}},[t._v("新增")])],2)],1)],1):t._e()],1):t._e()],1):t._e()],1),i("el-dialog",{attrs:{title:"请选择",visible:t.dialog1Visible,width:"80%","close-on-click-modal":!1,"before-close":t.handleClose},on:{"update:visible":function(a){t.dialog1Visible=a}}},[i("el-dialog",{attrs:{width:"80%",title:"新增",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(a){t.innerVisible=a}}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.addtext,callback:function(a){t.addtext=a},expression:"addtext"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-plus"},on:{click:t.handleAdd},slot:"append"})],1)],1),i("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.getlist},model:{value:t.category_id,callback:function(a){t.category_id=a},expression:"category_id"}},[t._l(t.categorylist,(function(a){return i("el-option",{key:a.category_id,attrs:{label:a.category_name,value:a.category_id}})})),i("el-option",{attrs:{value:"新增"}},[t._v(" 新增收款标签 ")])],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(a){t.dialog1Visible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"请选择",visible:t.dialog2Visible,width:"80%","close-on-click-modal":!1,"before-close":t.handleClose},on:{"update:visible":function(a){t.dialog2Visible=a}}},[i("div",{staticClass:"main"},[i("ul",{staticClass:"list"},t._l(t.mouldlist,(function(a,e){return i("li",{key:e,staticClass:"list_item",on:{click:function(e){return t.createQr(a.mould_id)}}},[i("div",{staticClass:"item_image"},[i("img",{attrs:{src:a.example,alt:""}})]),i("div",{staticClass:"item_opera"},[t._v(" 海报模板"+t._s(e+1)+" ")])])})),0)])]),t.isShow?i("div",{staticClass:"weui-gallery",staticStyle:{display:"block"}},[i("span",{staticClass:"weui-gallery__img",style:"background-image: url("+t.src+");",on:{click:function(){a.isShow=!1}}}),i("div",{staticClass:"weui-gallery__opr",on:{click:t.handleDel}},[t._m(0)])]):t._e(),i("div",{staticClass:"weui-cell  weui-cell_uploader"},[i("div",{staticClass:"weui-cell__bd"},[i("div",{staticClass:"weui-uploader"},[i("div",{staticClass:"weui-uploader__hd"},[i("p",{staticClass:"weui-uploader__title"},[t._v("配图"),i("i",{staticClass:"iconfont icon-weibiaoti2",staticStyle:{fontSize:".25rem",position:"relative",bottom:"-0.06rem"},on:{click:function(a){t.handleTips("配图,上传图片尺寸比例为1:1显示效果最佳(非必填)")}}})]),i("div",{staticClass:"weui-uploader__info"},[t._v(t._s(t.formData.image.length)+"/9")])]),i("div",{staticClass:"weui-uploader__bd"},[t.formData.image.length?i("ul",{staticClass:"weui-uploader__files",attrs:{id:"uploaderFiles"}},t._l(t.images,(function(a,e){return i("li",{key:e,staticClass:"weui-uploader__file",on:{click:function(i){return t.handleShow(a,e)}}},[i("img",{staticStyle:{width:"100%",height:"100%","object-fit":"cover",padding:"5%","box-sizing":"border-box"},attrs:{src:a}})])})),0):t._e(),t.showAdd?i("div",{staticClass:"weui-uploader__input-box"},[i("div",{staticStyle:{width:"100%",height:"100%"},on:{click:function(a){return t.chooseImage(t.upload)}}})]):t._e()])])])]),i("div",{staticClass:"wallet_footer"},[i("div",{staticClass:"footer_left footer_info",on:{click:t.handlePhoto}},[t._v("生成海报")]),i("div",{staticClass:"footer_right footer_info",on:{click:t.handleSave}},[t._v("保存收款单")])])],1)},o=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a",{staticClass:"weui-gallery__del",attrs:{href:"javascript:"}},[e("i",{staticClass:"weui-icon-delete weui-icon_gallery-delete"})])}],s=(e("c975"),e("a434"),e("b0c0"),e("b680"),e("d3b7"),e("ac1f"),e("3ca3"),e("466d"),e("5319"),e("1276"),e("5cc6"),e("9a8c"),e("a975"),e("735e"),e("c1ac"),e("d139"),e("3a7b"),e("d5d6"),e("82f8"),e("e91f"),e("60bd"),e("5f96"),e("3280"),e("3fcc"),e("ca91"),e("25a1"),e("cd26"),e("3c5d"),e("2954"),e("649e"),e("219c"),e("170b"),e("b39a"),e("72f7"),e("ddb0"),e("2b3d"),e("2909")),r=e("365c"),n=e("8f32"),c=e("76a0"),l=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"createForm"}},[e("van-collapse",{model:{value:a.activeNames,callback:function(t){a.activeNames=t},expression:"activeNames"}},[e("van-collapse-item",{attrs:{title:"标题1",name:"1"},scopedSlots:a._u([{key:"title",fn:function(){return[e("van-form",[e("van-field",{attrs:{label:"名称",clearable:"",required:"",placeholder:"请输入名称","right-icon":"warning-o",rules:[{required:!0,message:"请填写名称"}]},on:{"click-right-icon":function(t){return a.handleTips("名称")}},model:{value:a.formData.product_name,callback:function(t){a.$set(a.formData,"product_name",t)},expression:"formData.product_name"}})],1)]},proxy:!0}])},[e("van-field",{attrs:{rows:"2",clearable:"",autosize:"",label:"描述",type:"textarea",maxlength:"20",placeholder:"请输入描述"},model:{value:a.formData.introduction,callback:function(t){a.$set(a.formData,"introduction",t)},expression:"formData.introduction"}})],1),e("van-collapse-item",{attrs:{title:"标题1",name:"2"},scopedSlots:a._u([{key:"title",fn:function(){return[e("van-cell-group",[e("van-form",[e("van-field",{attrs:{label:"单价(￥)",required:"",clearable:"",type:"number",placeholder:"请输入单价","right-icon":"warning-o",rules:[{required:!0,message:"请填写单价"}]},on:{"click-right-icon":function(t){return a.handleTips("单价")},blur:a.change},model:{value:a.formData.price,callback:function(t){a.$set(a.formData,"price",t)},expression:"formData.price"}})],1)],1)]},proxy:!0}])},[e("van-checkbox",{attrs:{"checked-color":"#07c160"},model:{value:a.formData.num_flag,callback:function(t){a.$set(a.formData,"num_flag",t)},expression:"formData.num_flag"}},[a._v("可购买多个")])],1)],1)],1)},d=[],u={data:function(){return{activeNames:[],formData:{product_name:"",introduction:"",price:"",num_flag:!1}}},methods:{handleTips:function(a){MessageBox.alert("收款单"+a+"(必填项)","提示")}}},m=u,f=e("2877"),h=Object(f["a"])(m,l,d,!1,null,"5ccce6c2",null),p=h.exports,g={components:{createForm:p},watch:{category_id:function(a,t){"新增"===a&&(this.innerVisible=!0)}},data:function(){return{isShow:!1,options:[{text:"品类",value:0}],option2:[],title:"请选择品类运费表",value:0,showPicker:!1,columns:["重量(元/kg)","件(元/件)"],category_id:"",dialog1Visible:!1,dialog2Visible:!1,innerVisible:!1,showAdd:!0,categorylist:[],mouldlist:[],addtext:"",src:"",index:"",activeNames:["3"],radio:"0",address_flag:"",num_flag:"",images:[],formData:{product_name:"",price:0,num:1,address_flag:"0",introduction:"",image:[],num_flag:!1,checked1:!1,checked:!0,category_id:this.category_id,total:0,discount:10,fare:0,type_id:""}}},beforeMount:function(){this.$store.state.showTab=!1},mounted:function(){var a=this,t=location.href.split("#")[0];if(console.log("url---:",t),Object(r["k"])({url:t}).then((function(a){var t=a.data.data.config;Object(n["a"])(t)})),Object(r["n"])().then((function(t){a.option2=t.data.data})),"新增"===this.$route.params.val?(this.$route.params.item&&(this.formData=this.$route.params.item),this.$route.params.options&&(console.log(this.$route.params.options),this.option2=this.$route.params.options),Object(r["o"])().then((function(t){void 0!==t.data.data?(a.categorylist=t.data.data,a.category_id=t.data.data[0].category_id):a.categorylist=[]}))):this.category_id=this.$route.params.item.category_id,"新增"!==this.$route.params.val)switch(this.formData=this.$route.params.item,console.log("编辑收款单",this.formData),this.category_id=this.$route.params.item.category_id,this.images=Object(s["a"])(this.$route.params.image),this.$route.params.item.num_flag){case"0":this.formData.num_flag=!1;break;case"1":this.formData.num_flag=!0;break}},methods:{addressChange:function(){console.log(this.formData.address_flag),"0"===this.formData.address_flag&&(this.formData.checked1=!1)},setFare:function(){console.log(this.formData.checked1),this.formData.checked1&&(this.formData.fare="0.00")},handleClick:function(a){this.title=a.name,console.log(a.type_id),this.$refs.item.toggle()},onConfirm:function(){this.$router.push({name:"logistics",params:{item:this.formData,options:this.option2,category_id:this.category_id,val:this.$route.params.val,checked:this.checked}})},dataURLtoFile:function(a){var t="weixin",e=a.split(","),i=e[0].match(/:(.*?);/)[1],o=atob(e[1]),s=o.length,r=new Uint8Array(s);while(s--)r[s]=o.charCodeAt(s);return new File([r],t,{type:i})},upload:function(a){var t=a.localData;0!=t.indexOf("data:image")&&(t="data:image/jpeg;base64,"+t),t=t.replace(/\r|\n/g,"").replace("data:image/jgp","data:image/jpeg");var e=this.dataURLtoFile(t),i=window.URL||window.webkitURL||window.mozURL;this.images.push(i.createObjectURL(e)),this.formData.image.push(e),this.formData.image.length>8&&(this.showAdd=!1)},chooseImage:function(a){var t=this;wx.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var i;if(e.localIds.length+t.images.length<=9)for(i=0;i<e.localIds.length;i++)wx.getLocalImgData({localId:e.localIds[i],success:a});else t.$toast("最多选9张")}})},handleDel:function(){this.formData.image.splice(this.index,1),this.images.splice(this.index,1),this.formData.image.length<9&&(this.showAdd=!0),this.isShow=!1},change:function(){this.formData.price=parseFloat(this.formData.price).toFixed(2),this.formData.fare=parseFloat(this.formData.fare).toFixed(2)},handleTips:function(a){c["MessageBox"].alert("收款单"+a,"温馨提示")},handleShow:function(a,t){this.isShow=!0,this.src=a,this.index=t},handleBack:function(){this.$router.push("/goods")},handleClose:function(){this.dialog1Visible=!1,this.dialog2Visible=!1},handleChange:function(a){console.log(a)},getlist:function(){var a=this;Object(r["o"])().then((function(t){a.categorylist=t.data.data}))},handleAdd:function(){var a=this;""!=this.addtext?this.categorylist.length+1>5?(this.$toast("您最多可以拥有五个标签"),this.category_id=""):Object(r["b"])({category_name:this.addtext}).then((function(t){1===t.data.success&&(a.$toast("新增标签成功,还可以添加"+(5-a.categorylist.length)+"个"),a.addtext="",a.getlist(),a.innerVisible=!1)})):this.$toast("请输入标签名")},handleSave:function(){""!==this.formData.product_name&&this.formData.price>0?"新增"===this.$route.params.val?(console.log("从物流页保存",111),this.dialog1Visible=!0):this.submit():(this.error="error",!1===this.formData.num_flag&&(this.num_error="error"),this.$toast("请填写必要信息,名称必填,单价需大于0"))},handlePhoto:function(){var a=this;""===this.formData.product_name?this.$toast("请填写名称"):parseFloat(this.formData.price)<=0?this.$toast("单价需大于0"):!0===this.formData.checked1&&"请选择品类运费表"===this.title?this.$toast("请选择品类运费表"):Object(r["f"])().then((function(t){1===t.data.success&&(a.dialog2Visible=!0,a.mouldlist=t.data.data)}))},createQr:function(a){this.$router.push({name:"createqr",params:{item:this.formData,image:this.images,val:this.$route.params.val,mould_id:a}})},submit:function(){var a=this;if("修改"===this.$route.params.val){switch(this.$route.params.item.address_flag){case!0:this.address_flag="1";break;case!1:this.address_flag="0";break}switch(this.$route.params.item.num_flag){case!0:this.num_flag="1";break;case!1:this.num_flag="0";break}}else{switch(this.formData.address_flag){case!0:this.address_flag="1";break;case!1:this.address_flag="0";break}switch(this.formData.num_flag){case!0:this.num_flag="1";break;case!1:this.num_flag="0";break}}if("修改"===this.$route.params.val){for(var t=new FormData,e=0;e<this.formData.image.length;e++)t.append("img"+e,this.formData.image[e]);t.append("product_name",this.formData.product_name),t.append("value",this.formData.value),t.append("price",this.formData.price),t.append("checked",this.formData.checked),t.append("checked1",this.formData.checked1),t.append("introduction",this.formData.introduction),t.append("category_id",this.category_id),t.append("product_id",this.formData.product_id),t.append("address_flag",this.formData.address_flag),t.append("num_flag",this.num_flag),t.append("num",this.formData.num),t.append("total",this.formData.total),t.append("discount",this.formData.discount),t.append("fare",this.formData.fare),Object(r["w"])(t).then((function(t){1===t.data.success&&(a.$router.push("/goods"),a.formData={product_name:"",price:0,num:1,address_flag:"1",introduction:"",checked:!1,checked1:!1,image:[],num_flag:!1,total:0,discount:10,fare:0})}))}else{for(var i=new FormData,o=0;o<this.formData.image.length;o++)i.append("img"+o,this.formData.image[o]);i.append("product_name",this.formData.product_name),i.append("value",this.formData.value),i.append("price",this.formData.price),i.append("checked",this.formData.checked),i.append("checked1",this.formData.checked1),i.append("introduction",this.formData.introduction),i.append("category_id",this.category_id),i.append("address_flag",this.formData.address_flag),i.append("num_flag",this.num_flag),i.append("num",this.formData.num),i.append("total",this.formData.total),i.append("discount",this.formData.discount),i.append("fare",this.formData.fare),Object(r["d"])(i).then((function(t){1===t.data.success?(a.$router.push("/goods"),a.formData={product_name:"",price:0,num:1,address_flag:"1",introduction:"",checked:!1,checked1:!1,image:[],num_flag:!1,total:0,discount:10,fare:0}):a.$toast("网络错误，添加商品失败，需返回重新进入")}))}}}},_=g,v=(e("0029"),Object(f["a"])(_,i,o,!1,null,"3a8d9102",null));t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-059f7c58.677972fe.js.map