(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-137a5269"],{"159b":function(t,a,e){var i=e("da84"),o=e("fdbc"),r=e("17c2"),s=e("9112");for(var c in o){var n=i[c],l=n&&n.prototype;if(l&&l.forEach!==r)try{s(l,"forEach",r)}catch(d){l.forEach=r}}},"17c2":function(t,a,e){"use strict";var i=e("b727").forEach,o=e("a640"),r=e("ae40"),s=o("forEach"),c=r("forEach");t.exports=s&&c?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,a,e){"use strict";var i=e("23e7"),o=e("17c2");i({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"4de4":function(t,a,e){"use strict";var i=e("23e7"),o=e("b727").filter,r=e("1dde"),s=e("ae40"),c=r("filter"),n=s("filter");i({target:"Array",proto:!0,forced:!c||!n},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,a,e){"use strict";e.d(a,"a",(function(){return r}));e("a4d3"),e("4de4"),e("4160"),e("e439"),e("dbb4"),e("b64b"),e("159b");function i(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}function o(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,i)}return e}function r(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?o(Object(e),!0).forEach((function(a){i(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}},7732:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=this,e=a.$createElement,i=a._self._c||e;return i("div",{attrs:{id:"goods"}},[i("div",{staticClass:"create_header"},[i("div",{staticClass:"back",on:{click:a.handleBack}},[i("i",{staticClass:"iconfont icon-huitui"}),i("p",{staticClass:"header_info"},[a._v("返回")])]),i("div",{staticClass:"header_title"},[a._v("收款单")])]),i("van-collapse",{staticStyle:{"margin-top":".45rem"},model:{value:a.activeNames,callback:function(t){a.activeNames=t},expression:"activeNames"}},[i("van-collapse-item",{attrs:{name:"1",title:"标题"},scopedSlots:a._u([{key:"title",fn:function(){return[i("van-form",{on:{submit:a.onSubmit}},[i("van-field",{attrs:{label:"名称",clearable:"",required:"","right-icon":"warning-o"},on:{"click-right-icon":function(t){a.handleTips("名称(必填)")}},model:{value:a.formData.product_name,callback:function(t){a.$set(a.formData,"product_name",t)},expression:"formData.product_name"}})],1)]},proxy:!0}])},[i("van-field",{attrs:{rows:"2",clearable:"",autosize:"",label:"描述",type:"textarea",maxlength:"50",placeholder:"请输入描述"},model:{value:a.formData.introduction,callback:function(t){a.$set(a.formData,"introduction",t)},expression:"formData.introduction"}})],1),i("van-collapse-item",{attrs:{name:"2"},scopedSlots:a._u([{key:"title",fn:function(){return[i("van-form",{on:{submit:a.onSubmit}},[i("van-field",{attrs:{label:"单价(￥)",required:"",clearable:"",type:"text","right-icon":"warning-o"},on:{"click-right-icon":function(t){a.handleTips("单价(必填)")},blur:a.change},model:{value:a.formData.price,callback:function(t){a.$set(a.formData,"price",t)},expression:"formData.price"}})],1)]},proxy:!0}])},[i("van-checkbox",{staticStyle:{paddingLeft:".16rem"},attrs:{"checked-color":"#7BACDC","icon-size":"16"},model:{value:a.formData.num_flag,callback:function(t){a.$set(a.formData,"num_flag",t)},expression:"formData.num_flag"}},[a._v("可购买多个")])],1),i("van-cell",{staticStyle:{paddingLeft:".32rem"},attrs:{center:"",title:"更多选项"},scopedSlots:a._u([{key:"right-icon",fn:function(){return[i("van-switch",{attrs:{size:"18"},model:{value:a.formData.checked,callback:function(t){a.$set(a.formData,"checked",t)},expression:"formData.checked"}})]},proxy:!0}])}),a.formData.checked?i("div",[i("van-radio-group",{staticStyle:{fontSize:".14rem",paddingLeft:".32rem"},attrs:{direction:"horizontal","checked-color":"#7BACDC"},on:{change:a.addressChange},model:{value:a.formData.address_flag,callback:function(t){a.$set(a.formData,"address_flag",t)},expression:"formData.address_flag"}},[i("van-radio",{attrs:{name:"0","icon-size":"16"}},[a._v("无需发货")]),i("van-radio",{attrs:{name:"1","icon-size":"16"}},[a._v("发货")])],1),"1"===a.formData.address_flag?i("van-collapse-item",{attrs:{name:"3"},scopedSlots:a._u([{key:"title",fn:function(){return[i("van-field",{attrs:{label:"固定运费(￥)",disabled:a.checked1,clearable:"",type:"number",placeholder:"请输入运费"},model:{value:a.formData.fare,callback:function(t){a.$set(a.formData,"fare",t)},expression:"formData.fare"}})]},proxy:!0}],null,!1,312321628)},[i("van-checkbox",{staticStyle:{paddingLeft:".15rem"},attrs:{"checked-color":"#7BACDC","icon-size":"16"},on:{change:a.setFare},model:{value:a.checked1,callback:function(t){a.checked1=t},expression:"checked1"}},[a._v("运费自动计算")]),a.checked1?i("van-dropdown-menu",{staticStyle:{"margin-top":".2rem"},attrs:{direction:"up","acitve-color":"#7BACDC"}},[i("van-dropdown-item",{ref:"item",attrs:{title:a.title}},[a._l(a.option2,(function(t){return i("van-cell",{key:t.type_id,attrs:{title:t.name},on:{click:function(e){return a.handleClick(t)}}})})),i("van-button",{attrs:{block:"",type:"info"},on:{click:a.onConfirm}},[a._v("配置")])],2)],1):a._e()],1):a._e()],1):a._e()],1),i("el-dialog",{attrs:{title:"请选择",visible:a.dialog1Visible,width:"80%","close-on-click-modal":!1,"before-close":a.handleClose},on:{"update:visible":function(t){a.dialog1Visible=t}}},[i("el-dialog",{attrs:{width:"80%",title:"新增",visible:a.innerVisible,"append-to-body":""},on:{"update:visible":function(t){a.innerVisible=t}}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:a.addtext,callback:function(t){a.addtext=t},expression:"addtext"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-plus"},on:{click:a.handleAdd},slot:"append"})],1)],1),i("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":a.getlist},model:{value:a.category_id,callback:function(t){a.category_id=t},expression:"category_id"}},[a._l(a.categorylist,(function(t){return i("el-option",{key:t.category_id,attrs:{label:t.category_name,value:t.category_id}})})),i("el-option",{attrs:{value:"新增"}},[a._v(" 新增收款标签 ")])],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){a.dialog1Visible=!1}}},[a._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:a.submit}},[a._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"请选择",visible:a.dialog2Visible,width:"80%","close-on-click-modal":!1,"before-close":a.handleClose},on:{"update:visible":function(t){a.dialog2Visible=t}}},[i("div",{staticClass:"main"},[i("ul",{staticClass:"list"},a._l(a.mouldlist,(function(t,e){return i("li",{key:e,staticClass:"list_item",on:{click:function(e){return a.createQr(t.mould_id)}}},[i("div",{staticClass:"item_image"},[i("img",{attrs:{src:t.example,alt:""}})]),i("div",{staticClass:"item_opera"},[a._v(" 海报模板"+a._s(e+1)+" ")])])})),0)])]),a.isShow?i("div",{staticClass:"weui-gallery",staticStyle:{display:"block"}},[i("span",{staticClass:"weui-gallery__img",style:"background-image: url("+a.src+");",on:{click:function(){t.isShow=!1}}}),i("div",{staticClass:"weui-gallery__opr",on:{click:a.handleDel}},[a._m(0)])]):a._e(),i("div",{staticClass:"weui-cell  weui-cell_uploader"},[i("div",{staticClass:"weui-cell__bd"},[i("div",{staticClass:"weui-uploader"},[i("div",{staticClass:"weui-uploader__hd"},[i("p",{staticClass:"weui-uploader__title"},[a._v("配图"),i("i",{staticClass:"iconfont icon-weibiaoti2",staticStyle:{fontSize:".25rem",position:"relative",bottom:"-0.06rem"},on:{click:function(t){a.handleTips("配图,上传图片尺寸比例为1:1显示效果最佳(非必填)")}}})]),i("div",{staticClass:"weui-uploader__info"},[a._v(a._s(a.formData.image.length)+"/9")])]),i("div",{staticClass:"weui-uploader__bd"},[a.formData.image.length?i("ul",{staticClass:"weui-uploader__files",attrs:{id:"uploaderFiles"}},a._l(a.images,(function(t,e){return i("li",{key:e,staticClass:"weui-uploader__file",on:{click:function(i){return a.handleShow(t,e)}}},[i("img",{staticStyle:{width:"100%",height:"100%","object-fit":"cover",padding:"5%","box-sizing":"border-box"},attrs:{src:t}})])})),0):a._e(),a.showAdd?i("div",{staticClass:"weui-uploader__input-box"},[i("div",{staticStyle:{width:"100%",height:"100%"},on:{click:function(t){return a.chooseImage(a.upload)}}})]):a._e()])])])]),i("div",{staticClass:"wallet_footer"},[i("div",{staticClass:"footer_left footer_info",on:{click:a.handlePhoto}},[a._v("生成海报")]),i("div",{staticClass:"footer_right footer_info",on:{click:a.handleSave}},[a._v("保存收款单")])])],1)},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"weui-gallery__del",attrs:{href:"javascript:"}},[e("i",{staticClass:"weui-icon-delete weui-icon_gallery-delete"})])}],r=(e("c975"),e("a434"),e("b0c0"),e("b680"),e("d3b7"),e("ac1f"),e("3ca3"),e("466d"),e("5319"),e("1276"),e("5cc6"),e("9a8c"),e("a975"),e("735e"),e("c1ac"),e("d139"),e("3a7b"),e("d5d6"),e("82f8"),e("e91f"),e("60bd"),e("5f96"),e("3280"),e("3fcc"),e("ca91"),e("25a1"),e("cd26"),e("3c5d"),e("2954"),e("649e"),e("219c"),e("170b"),e("b39a"),e("72f7"),e("ddb0"),e("2b3d"),e("2909")),s=e("5530"),c=e("365c"),n=e("8f32"),l=e("76a0"),d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"createForm"}},[e("van-collapse",{model:{value:t.activeNames,callback:function(a){t.activeNames=a},expression:"activeNames"}},[e("van-collapse-item",{attrs:{title:"标题1",name:"1"},scopedSlots:t._u([{key:"title",fn:function(){return[e("van-form",[e("van-field",{attrs:{label:"名称",clearable:"",required:"",placeholder:"请输入名称","right-icon":"warning-o",rules:[{required:!0,message:"请填写名称"}]},on:{"click-right-icon":function(a){return t.handleTips("名称")}},model:{value:t.formData.product_name,callback:function(a){t.$set(t.formData,"product_name",a)},expression:"formData.product_name"}})],1)]},proxy:!0}])},[e("van-field",{attrs:{rows:"2",clearable:"",autosize:"",label:"描述",type:"textarea",maxlength:"20",placeholder:"请输入描述"},model:{value:t.formData.introduction,callback:function(a){t.$set(t.formData,"introduction",a)},expression:"formData.introduction"}})],1),e("van-collapse-item",{attrs:{title:"标题1",name:"2"},scopedSlots:t._u([{key:"title",fn:function(){return[e("van-cell-group",[e("van-form",[e("van-field",{attrs:{label:"单价(￥)",required:"",clearable:"",type:"number",placeholder:"请输入单价","right-icon":"warning-o",rules:[{required:!0,message:"请填写单价"}]},on:{"click-right-icon":function(a){return t.handleTips("单价")},blur:t.change},model:{value:t.formData.price,callback:function(a){t.$set(t.formData,"price",a)},expression:"formData.price"}})],1)],1)]},proxy:!0}])},[e("van-checkbox",{attrs:{"checked-color":"#07c160"},model:{value:t.formData.num_flag,callback:function(a){t.$set(t.formData,"num_flag",a)},expression:"formData.num_flag"}},[t._v("可购买多个")])],1)],1)],1)},f=[],u={data:function(){return{activeNames:[],formData:{product_name:"",introduction:"",price:"",num_flag:!1}}},methods:{handleTips:function(t){MessageBox.alert("收款单"+t+"(必填项)","提示")}}},h=u,m=e("2877"),p=Object(m["a"])(h,d,f,!1,null,"5ccce6c2",null),g=p.exports,_={components:{createForm:g},watch:{category_id:function(t,a){"新增"===t&&(this.innerVisible=!0)}},data:function(){return{isShow:!1,options:[{text:"品类",value:0}],option2:[],title:"请选择品类运费表",value:0,showPicker:!1,columns:["重量(元/kg)","件(元/件)"],category_id:"",dialog1Visible:!1,dialog2Visible:!1,innerVisible:!1,showAdd:!0,checked1:!1,categorylist:[],mouldlist:[],addtext:"",src:"",index:"",activeNames:["3"],radio:"0",address_flag:"",num_flag:"",images:[],formData:{product_name:"",price:0,address_flag:"0",introduction:"",image:[],num_flag:!1,checked1:!0,checked:!1,category_id:this.category_id,total:0,discount:10,fare:0,type_id:"",package_type:""}}},beforeMount:function(){this.$store.state.showTab=!1},mounted:function(){var t=this,a=location.href.split("#")[0];if(console.log("url---:",a),Object(c["j"])({url:a}).then((function(t){var a=t.data.data.config;Object(n["a"])(a)})),Object(c["n"])().then((function(a){t.option2=a.data.data})),"新增"===this.$route.params.val?(this.$route.params.item&&(this.formData=this.$route.params.item,"0"==this.formData.package_type||""==this.formData.package_type?this.checked1=!1:this.checked1=!0),this.$route.params.options&&(console.log(this.$route.params.options),this.option2=this.$route.params.options),Object(c["o"])().then((function(a){void 0!==a.data.data?(t.categorylist=a.data.data,t.category_id=a.data.data[0].category_id):t.categorylist=[]}))):this.category_id=this.$route.params.item.category_id,"新增"!==this.$route.params.val){switch(this.formData=this.$route.params.item,this.$route.params.item.address_flag){case"0":this.formData=Object(s["a"])({},this.formData,{},{checked:!1});break;case"1":this.formData=Object(s["a"])({},this.formData,{},{checked:!0});break}switch(console.log("2151561456",this.formData),"0"==this.formData.package_type||""==this.formData.package_type?this.checked1=!1:this.checked1=!0,this.checked1&&Object(c["n"])().then((function(a){t.option2=a.data.data;for(var e=0;e<t.option2.length;e++)t.option2[e].type_id==t.$route.params.item.package_type&&(t.title=t.option2[e].name,t.formData.package_type=t.$route.params.item.package_type)})),console.log("编辑收款单",this.formData),this.category_id=this.$route.params.item.category_id,this.images=Object(r["a"])(this.$route.params.image),this.$route.params.item.num_flag){case"0":this.formData.num_flag=!1;break;case"1":this.formData.num_flag=!0;break}}},methods:{addressChange:function(){console.log(this.formData.address_flag),"0"===this.formData.address_flag&&(this.checked1=!1)},setFare:function(){console.log(this.checked1),this.checked1?this.formData.fare="0.00":this.formData.package_type="0"},handleClick:function(t){this.title=t.name,this.formData.package_type=t.type_id,this.$refs.item.toggle(),console.log(this.$refs)},onConfirm:function(){this.$router.push({name:"logistics",params:{image:this.images,item:this.formData,options:this.option2,category_id:this.category_id,val:this.$route.params.val,checked:this.checked,checked1:this.checked1}})},dataURLtoFile:function(t){var a="weixin",e=t.split(","),i=e[0].match(/:(.*?);/)[1],o=atob(e[1]),r=o.length,s=new Uint8Array(r);while(r--)s[r]=o.charCodeAt(r);return new File([s],a,{type:i})},upload:function(t){var a=t.localData;0!=a.indexOf("data:image")&&(a="data:image/jpeg;base64,"+a),a=a.replace(/\r|\n/g,"").replace("data:image/jgp","data:image/jpeg");var e=this.dataURLtoFile(a),i=window.URL||window.webkitURL||window.mozURL;this.images.push(i.createObjectURL(e)),this.formData.image.push(e),this.formData.image.length>8&&(this.showAdd=!1)},chooseImage:function(t){var a=this;wx.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var i;if(e.localIds.length+a.images.length<=9)for(i=0;i<e.localIds.length;i++)wx.getLocalImgData({localId:e.localIds[i],success:t});else a.$toast("最多选9张")}})},handleDel:function(){this.formData.image.splice(this.index,1),this.images.splice(this.index,1),this.formData.image.length<9&&(this.showAdd=!0),this.isShow=!1},change:function(){""!==this.formData.price&&(this.formData.price=parseFloat(this.formData.price).toFixed(2)),this.formData.fare=parseFloat(this.formData.fare).toFixed(2)},handleTips:function(t){l["MessageBox"].alert("收款单"+t,"温馨提示")},handleShow:function(t,a){this.isShow=!0,this.src=t,this.index=a},handleBack:function(){this.$router.push("/goods")},handleClose:function(){this.dialog1Visible=!1,this.dialog2Visible=!1},handleChange:function(t){console.log(t)},getlist:function(){var t=this;Object(c["o"])().then((function(a){t.categorylist=a.data.data}))},handleAdd:function(){var t=this;""!=this.addtext?this.categorylist.length+1>5?(this.$toast("您最多可以拥有五个标签"),this.category_id=""):Object(c["a"])({category_name:this.addtext}).then((function(a){1===a.data.success&&(t.$toast("新增标签成功,还可以添加"+(5-t.categorylist.length)+"个"),t.addtext="",t.getlist(),t.innerVisible=!1)})):this.$toast("请输入标签名")},handleSave:function(){""===this.formData.product_name?this.$toast("请填写名称"):parseFloat(this.formData.price)<=0||""===this.formData.price?this.$toast("单价需大于0"):!0===this.checked1&&"请选择品类运费表"===this.title?this.$toast("请选择品类运费表"):"新增"===this.$route.params.val?(console.log("从物流页保存",111),this.dialog1Visible=!0):this.submit()},handlePhoto:function(){var t=this;""===this.formData.product_name?this.$toast("请填写名称"):parseFloat(this.formData.price)<=0||""===this.formData.price?this.$toast("单价需大于0"):!0===this.checked1&&"请选择品类运费表"===this.title?this.$toast("请选择品类运费表"):Object(c["e"])().then((function(a){1===a.data.success&&(t.dialog2Visible=!0,t.mouldlist=a.data.data)}))},createQr:function(t){this.$router.push({name:"createqr",params:{item:this.formData,image:this.images,val:this.$route.params.val,mould_id:t}})},submit:function(){var t=this;if("修改"===this.$route.params.val){switch(this.$route.params.item.address_flag){case!0:this.address_flag="1";break;case!1:this.address_flag="0";break}switch(this.formData.num_flag){case!0:this.num_flag="1";break;case!1:this.num_flag="0";break}}else{switch(this.formData.address_flag){case!0:this.address_flag="1";break;case!1:this.address_flag="0";break}switch(this.formData.num_flag){case!0:this.num_flag="1";break;case!1:this.num_flag="0";break}}if("修改"===this.$route.params.val){for(var a=new FormData,e=0;e<this.formData.image.length;e++)a.append("img"+e,this.formData.image[e]);a.append("product_name",this.formData.product_name),a.append("price",this.formData.price),a.append("checked",this.formData.checked),a.append("introduction",this.formData.introduction),a.append("category_id",this.category_id),a.append("product_id",this.formData.product_id),a.append("address_flag",this.formData.address_flag),a.append("num_flag",this.num_flag),a.append("total",this.formData.total),a.append("discount",this.formData.discount),a.append("fare",this.formData.fare),a.append("package_type",this.formData.package_type),Object(c["y"])(a).then((function(a){1===a.data.success&&(t.$router.push("/goods"),t.formData={product_name:"",price:0,address_flag:"1",introduction:"",checked:!1,checked1:!1,image:[],num_flag:!1,total:0,discount:10,fare:0})}))}else{for(var i=new FormData,o=0;o<this.formData.image.length;o++)i.append("img"+o,this.formData.image[o]);i.append("product_name",this.formData.product_name),i.append("price",this.formData.price),i.append("checked",this.formData.checked),i.append("introduction",this.formData.introduction),i.append("category_id",this.category_id),i.append("address_flag",this.formData.address_flag),i.append("num_flag",this.num_flag),i.append("total",this.formData.total),i.append("discount",this.formData.discount),i.append("fare",this.formData.fare),i.append("package_type",this.formData.package_type),Object(c["c"])(i).then((function(a){1===a.data.success?(t.$router.push("/goods"),t.formData={product_name:"",price:0,address_flag:"1",introduction:"",checked:!1,checked1:!1,image:[],num_flag:!1,total:0,discount:10,fare:0}):t.$toast("网络错误，添加商品失败，需返回重新进入")}))}}}},b=_,v=(e("94c3"),Object(m["a"])(b,i,o,!1,null,"b48daed0",null));a["default"]=v.exports},"94c3":function(t,a,e){"use strict";var i=e("9cc9"),o=e.n(i);o.a},"9cc9":function(t,a,e){},b64b:function(t,a,e){var i=e("23e7"),o=e("7b0b"),r=e("df75"),s=e("d039"),c=s((function(){r(1)}));i({target:"Object",stat:!0,forced:c},{keys:function(t){return r(o(t))}})},dbb4:function(t,a,e){var i=e("23e7"),o=e("83ab"),r=e("56ef"),s=e("fc6a"),c=e("06cf"),n=e("8418");i({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){var a,e,i=s(t),o=c.f,l=r(i),d={},f=0;while(l.length>f)e=o(i,a=l[f++]),void 0!==e&&n(d,a,e);return d}})},e439:function(t,a,e){var i=e("23e7"),o=e("d039"),r=e("fc6a"),s=e("06cf").f,c=e("83ab"),n=o((function(){s(1)})),l=!c||n;i({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(t,a){return s(r(t),a)}})}}]);